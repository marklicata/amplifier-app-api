# Production Docker Compose Override
# Usage: docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  amplifier-service:
    environment:
      # Override dev settings for production
      LOG_LEVEL: warning
      
      # Telemetry - Production settings
      TELEMETRY_ENVIRONMENT: production
      TELEMETRY_SAMPLE_RATE: 1.0
      TELEMETRY_ENABLE_DEV_LOGGER: false
      
      # Security - MUST override these
      SECRET_KEY: ${SECRET_KEY}  # Required: Generate with openssl rand -hex 32
      
      # Production CORS - Restrict to your domains
      ALLOWED_ORIGINS: https://yourdomain.com,https://api.yourdomain.com
      
      # Rate limiting - More restrictive in prod
      RATE_LIMIT_REQUESTS_PER_MINUTE: 30
    
    restart: always
    
    # Production healthcheck - more frequent
    healthcheck:
      interval: 15s
      timeout: 5s
      retries: 5
      start_period: 30s
